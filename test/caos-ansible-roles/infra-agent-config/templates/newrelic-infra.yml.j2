#jinja2:lstrip_blocks: True
config_agent: |
  license_key: {{ nr_license_key }}
  custom_attributes:
      environment: {{ nr_environment }}
      department: {{ department }}
      product: {{ product }}
      project: {{ project }}
      owning_team: {{ owning_team }}

  display_name: {{ display_name }}
  log:
    level: {{ log_level }}
    {% if log_file != "" %}
    file: {{ log_file }}
    {% endif %}
    forward: {{ log_forward }}
    rotate:
      max_size_mb: {{ log_rotation_mb }}
      max_files: {{ log_rotation_max_files }}
      compression_enabled: {{ log_rotation_compressed }}

  ntp_metrics:
    enabled: true
    pool:
      - time.cloudflare.com
      - time.google.com
    interval: 15
    timeout: 10

  staging: {{ staging }}
  enable_process_metrics: {{ enable_process_metrics }}
  {% if self_instrumentation %}
  self_instrumentation: "newrelic"
  {% endif %}
