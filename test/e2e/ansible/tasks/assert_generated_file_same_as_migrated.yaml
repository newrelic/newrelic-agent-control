---
- name: Wait for generated_file_path file to be created
  ansible.builtin.wait_for:
    path: "{{ generated_file_path }}"
    state: present
    timeout: 300

- name: get migrated file_content
  shell: cat {{ migrated_file_path }}
  register: migrated_file_content

- name: assert on config content
  include_tasks: ./assert_full_file_content.yaml
  vars:
    file_path: "{{ generated_file_path }}"
    expected_content: "{{ migrated_file_content.stdout }}"
