# Cluster and License info is set with "--set" in the e2e-spec file

agent-control-deployment:
  config:
    fleet_control:
      enabled: false
    agentControl:
      content:
        log:
          level: trace
    subAgents:
      operator:
        type: newrelic/com.newrelic.k8s_agent_operator:0.1.0
        content:
          chart_version: "*"
      # One agent per language
      java-agent:
        type: newrelic/com.newrelic.apm_java:0.1.0
        content:
          pod_label_selector:
            matchExpressions:
              - key: "app"
                operator: "In"
                values: [ "javaapp" ]
          env:
            - name: NEW_RELIC_AGENT_CONTROL_ENABLED
              value: 'true'
            - name: NEW_RELIC_HOST
              value: "staging-collector.newrelic.com"
            - name: NEW_RELIC_EVENT_INGEST_URI
              value: "https://staging-insights-collector.newrelic.com"
            - name: NEW_RELIC_METRIC_INGEST_URI
              value: "https://staging-metric-api.newrelic.com"
          health_env:
            - name: NEW_RELIC_FLEET_CONTROL_HEALTH_PATH
              value: /newrelic/apm/health
      python-agent:
        type: newrelic/com.newrelic.apm_python:0.1.0
        content:
          pod_label_selector:
            matchExpressions:
              - key: "app"
                operator: "In"
                values: [ "pythonapp" ]
          env:
            - name: NEW_RELIC_AGENT_CONTROL_ENABLED
              value: 'true'
            - name: NEW_RELIC_HOST
              value: "staging-collector.newrelic.com"
            - name: NEW_RELIC_EVENT_INGEST_URI
              value: "https://staging-insights-collector.newrelic.com"
            - name: NEW_RELIC_METRIC_INGEST_URI
              value: "https://staging-metric-api.newrelic.com"
          health_env:
            - name: NEW_RELIC_FLEET_CONTROL_HEALTH_PATH
              value: /newrelic/apm/health
      node-agent:
        type: newrelic/com.newrelic.apm_node:0.1.0
        content:
          pod_label_selector:
            matchExpressions:
              - key: "app"
                operator: "In"
                values: [ "nodeapp" ]
      ruby-agent:
        type: newrelic/com.newrelic.apm_ruby:0.1.0
        content:
          pod_label_selector:
            matchExpressions:
              - key: "app"
                operator: "In"
                values: [ "rubyapp" ]
      dotnet-agent:
        type: newrelic/com.newrelic.apm_dotnet:0.1.0
        content:
          pod_label_selector:
            matchExpressions:
              - key: "app"
                operator: "In"
                values: [ "dotneteapp" ]
