{
  "extends": [
    "config:base",
    // go dependencies and auto-merge configuration: https://github.com/newrelic/coreint-automation/blob/main/renovate-base.json5
    "github>newrelic/coreint-automation:renovate-base.json5"
  ],
  "labels": [
    "dependencies"
  ],
  "automerge": false,
  "enabledManagers": [
    "cargo",
    "regex",
  ],
  "regexManagers": [
    {
      // Parse bundle image version from `base_image` ARG in Dockerfile.
      "fileMatch": [
        "system_identity_registration/Dockerfile$"
      ],
      "datasourceTemplate": "docker",
      "matchStrings": [
        "base_image=(?<depName>.+):(?<currentValue>.+)"
      ]
    },
    {
      // Extract dependency name and version for integrations.
      "fileMatch": [
        "^.goreleaser.yml$"
      ],
      // Dependency name (org/repo format) is created from the `integrationName` named capture group in the regex below.
      "depNameTemplate": "newrelic/infrastructure-agent",
      "datasourceTemplate": "github-releases",
      // Version info is fetched from GitHub.
      "matchStrings": [
        // Capture integration name (without `newrelic/`) and version from bundle.yaml.
        " *- NEWRELIC_INFRA_AGENT_VERSION=(?<currentValue>.+)"
      ]
    },
    {
      // Extract dependency name and version for integrations.
      "fileMatch": [
        "^.goreleaser.yml$"
      ],
      // Dependency name (org/repo format) is created from the `integrationName` named capture group in the regex below.
      "depNameTemplate": "newrelic/nrdot-collector-releases",
      "datasourceTemplate": "github-releases",
      // Version info is fetched from GitHub.
      "matchStrings": [
        // Capture integration name (without `newrelic/`) and version from bundle.yaml.
        " *- NR_OTEL_COLLECTOR_VERSION=(?<currentValue>.+)"
      ]
    }

  ],
  "rangeStrategy": "auto",
  // See <https://docs.renovatebot.com/configuration-options/#rangestrategy>
  "prConcurrentLimit": 0,
  "printConfig": true,
  "prHourlyLimit": 0,
  "packageRules": [
    {
      "managers": [
        "cargo"
      ],
      "updateTypes": [
        "minor",
        "patch"
      ],
      "groupName": "minor and patch updates"
    }
  ]
}
