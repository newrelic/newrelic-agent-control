name: ⏯️💥🐤 Prune Canaries on demand

on:
  workflow_dispatch:
    inputs:
      tag:
        description: 'Version of the agent-control canaries to prune'
        required: true

permissions:
  id-token: write
  contents: read

jobs:
  canaries:
    uses: ./.github/workflows/component_canaries_prune.yaml
    with:
      TAG: ${{ inputs.tag }}
    secrets:
      AWS_ROLE_ARN: ${{ secrets.AWS_ROLE_ARN }}
      AWS_VPC_SUBNET: ${{ secrets.AWS_VPC_SUBNET }}
