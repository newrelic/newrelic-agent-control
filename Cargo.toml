[workspace]
resolver = "3"

members = ["agent-control", "resource-detection", "fs", "wrapper_with_default"]

[workspace.package]
authors = ["The New Relic Agent Control Team"]
edition = "2024"
publish = false
rust-version = "1.89.0"
license-file = "./LICENSE.md"

[workspace.dependencies]
serde_json = "1.0.140"
serde = "1.0.223"
tempfile = "3.18.0"
thiserror = "2.0.16"
tracing = "0.1.41"
regex = "1.11.1"
mockall = "0.13.1"
clap = "4.5.47"
nix = "0.30.0"
tracing-subscriber = { version = "0.3.19", features = [ "json" ] }
tracing-test = "0.2.5"
assert_cmd = "2.0.17"
assert_matches = "1.5.0"
tower-test = "0.4.0"
serde_yaml = "0.9.34+deprecated"
schemars = "1.0.4"
http = "1.3.1"
mockall_double = "0.3.1"
predicates = "3.1.3"
konst = "0.4.2"
semver = "1.0.26"
chrono = "0.4.42"
jsonwebtoken = "9.3.1"
# reqwest's default-features enables default-tls and we are not including it since we are using rustls only.
reqwest = { version = "0.12.23", default-features = false, features = [
  "blocking",
  "rustls-tls",
  "rustls-tls-native-roots",
  "socks",
] }

[profile.release]
# remove debug symbols from the release binary
# After <https://github.com/rust-lang/cargo/pull/13257> this is the default
# behavior for cargo, unless debuginfo is enabled for any compiled package
strip = "debuginfo"

[workspace.metadata.cargo-shear]
ignored = ["mockall_double"]
